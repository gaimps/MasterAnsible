---
  -
    # target
    hosts: all

    # tasks:
    tasks:
      - name: Make Facts Dir
        file:
          path: /home/packt/ansible/facts.d
          recurse: yes
          state: directory
          owner: packt

      - name: Copy Fact 1
        copy:
          src: facts.d/getdate1.fact
          dest: /home/packt/ansible/facts.d/getdate1.fact
          owner: packt
          mode: 0755

      - name: Copy Fact 2
        copy:
          src: facts.d/getdate2.fact
          dest: /home/packt/ansible/facts.d/getdate2.fact
          owner: packt
          mode: 0755

      - name: Reload Facts
        setup:
          fact_path: /home/packt/ansible/facts.d

      - name: Show Ip Address
        debug:
          msg: "{{ ansible_default_ipv4.address }}"

      - name: Show custom fact 1
        debug:
          msg: "{{ ansible_local.getdate1.date }}"
      - name: Show custom fact 2
        debug:
          msg: "{{ ansible_local.getdate2.date.date }}"
      - name: Show Custom Fact 1 in hostvars
        debug:
          msg: "{{ hostvars[ansible_hostname].ansible_local.getdate1.date }}"

      - name: Show Custom Fact 2 in hostvars
        debug:
          msg: "{{hostvars[ansible_hostname].ansible_local.getdate2.date.date }}"
...
